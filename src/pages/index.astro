---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import Project from "../components/project.astro";
import Information from "../components/information.astro";
import Experience from "../components/experience.astro";
import { config } from "../config";
import PostListing from "../components/post_listing.astro";

const projects = await getCollection("projects");
const experiences = await getCollection("experiences");
const posts = await getCollection("posts");
---

<Layout title={config.name}>
  <main
    class="p-8 md:flex md:items-start lg:w-3/5 min-h-screen text-white mx-auto mt-10"
  >
    <Information />

    <section class="flex-grow">
      <div class="pt-2">
        <h2 class="text-5xl mb-4 text-blue-200">Posts</h2>
        {posts.map((post) => <PostListing post={post} />)}
      </div>

      <section id="experiences" class="mb-8 flex-1">
        <h2 class="text-5xl mb-4 text-blue-200">Experience</h2>
        {
          experiences.map((experience) => (
            <Experience experience={experience} />
          ))
        }
      </section>

      <section id="projects">
        <h2 class="text-5xl mb-4 text-blue-200">Projects</h2>
        <div class="section">
          {projects.map((project) => <Project project={project} />)}
        </div>
      </section>
    </section>
  </main>
</Layout>
